import{g as P,h as L,i as R,j as U,k as $,l as A,m as V,p as j,q as T,s as q,v as z,x as G,y as W,z as M,A as I,B as x,C as J,u as w,D as Q,a as X,E as Y,F as Z,G as K,H as k,c as aa,t as ea,o as ta}from"./CSH2LEpN.js";const na={trailing:!0};function ra(a,t=25,i={}){if(i={...na,...i},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,r,D=[],n,e;const f=(d,v)=>(n=sa(a,d,v),n.finally(()=>{if(n=null,i.trailing&&e&&!r){const b=f(d,e);return e=null,b}}),n),m=function(...d){return i.trailing&&(e=d),n||new Promise(v=>{const b=!r&&i.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const c=i.leading?s:f(this,d);e=null;for(const _ of D)_(c);D=[]},t),b?(s=f(this,d),v(s)):D.push(v)})},o=d=>{d&&(clearTimeout(d),r=null)};return m.isPending=()=>!!r,m.cancel=()=>{o(r),D=[],e=null},m.flush=()=>{if(o(r),!e||n)return;const d=e;return e=null,f(this,d)},m}async function sa(a,t,i){return await a.apply(t,i)}function oa(...a){const t=typeof a[a.length-1]=="string"?a.pop():void 0;ia(a[0],a[1])&&a.unshift(t);let[i,s,r={}]=a,D=!1;const n=P(()=>L(i));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const e=R();r.server??=!0,r.default??=la,r.getCachedData??=N,r.lazy??=!1,r.immediate??=!0,r.deep??=U.deep,r.dedupe??="cancel",r._functionName,e._asyncData[n.value];function f(){const c={cause:"initial",dedupe:r.dedupe};return e._asyncData[n.value]?._init||(c.cachedData=r.getCachedData(n.value,e,{cause:"initial"}),e._asyncData[n.value]=B(e,n.value,s,r,c.cachedData)),()=>e._asyncData[n.value].execute(c)}const m=f(),o=e._asyncData[n.value];o._deps++;const d=r.server!==!1&&e.payload.serverRendered;{let c=function(u){const l=e._asyncData[u];l?._deps&&(l._deps--,l._deps===0&&l?._off())};const _=$();if(_&&d&&r.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const u=_._nuxtOnBeforeMountCbs;A(()=>{u.forEach(l=>{l()}),u.splice(0,u.length)}),V(()=>u.splice(0,u.length))}const C=_&&(_._nuxtClientOnly||j(z,!1));d&&e.isHydrating&&(o.error.value||o.data.value!==void 0)?o.status.value=o.error.value?"error":"success":_&&(!C&&e.payload.serverRendered&&e.isHydrating||r.lazy)&&r.immediate?_._nuxtOnBeforeMountCbs.push(m):r.immediate&&o.status.value!=="success"&&m();const h=G(),y=T(n,(u,l)=>{if((u||l)&&u!==l){D=!0;const O=e._asyncData[l]?.data.value!==void 0,H=e._asyncDataPromises[l]!==void 0,S={cause:"initial",dedupe:r.dedupe};if(!e._asyncData[u]?._init){let p;l&&O?p=e._asyncData[l].data.value:(p=r.getCachedData(u,e,{cause:"initial"}),S.cachedData=p),e._asyncData[u]=B(e,u,s,r,p)}e._asyncData[u]._deps++,l&&c(l),(r.immediate||O||H)&&e._asyncData[u].execute(S),Q(()=>{D=!1})}},{flush:"sync"}),g=r.watch?T(r.watch,()=>{D||e._asyncData[n.value]?._execute({cause:"watch",dedupe:r.dedupe})}):()=>{};h&&q(()=>{y(),g(),c(n.value)})}const v={data:E(()=>e._asyncData[n.value]?.data),pending:E(()=>e._asyncData[n.value]?.pending),status:E(()=>e._asyncData[n.value]?.status),error:E(()=>e._asyncData[n.value]?.error),refresh:(...c)=>e._asyncData[n.value]?._init?e._asyncData[n.value].execute(...c):f()(),execute:(...c)=>v.refresh(...c),clear:()=>{const c=e._asyncData[n.value];if(c?._abortController)try{c._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{c._abortController=void 0}F(e,n.value)}},b=Promise.resolve(e._asyncDataPromises[n.value]).then(()=>v);return Object.assign(b,v),b}function E(a){return P({get(){return a()?.value},set(t){const i=a();i&&(i.value=t)}})}function ia(a,t){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof t=="function")}function F(a,t){t in a.payload.data&&(a.payload.data[t]=void 0),t in a.payload._errors&&(a.payload._errors[t]=void 0),a._asyncData[t]&&(a._asyncData[t].data.value=w(a._asyncData[t]._default()),a._asyncData[t].error.value=void 0,a._asyncData[t].status.value="idle"),t in a._asyncDataPromises&&(a._asyncDataPromises[t]=void 0)}function ca(a,t){const i={};for(const s of t)i[s]=a[s];return i}function B(a,t,i,s,r){a.payload._errors[t]??=void 0;const D=s.getCachedData!==N,n=i,e=s.deep?W:M,f=r!==void 0,m=a.hook("app:data:refresh",async d=>{(!d||d.includes(t))&&await o.execute({cause:"refresh:hook"})}),o={data:e(f?r:s.default()),pending:P(()=>o.status.value==="pending"),error:I(a.payload._errors,t),status:M("idle"),execute:(...d)=>{const[v,b=void 0]=d,c=v&&b===void 0&&typeof v=="object"?v:{};if(a._asyncDataPromises[t]&&(c.dedupe??s.dedupe)==="defer")return a._asyncDataPromises[t];{const h="cachedData"in c?c.cachedData:s.getCachedData(t,a,{cause:c.cause??"refresh:manual"});if(h!==void 0)return a.payload.data[t]=o.data.value=h,o.error.value=void 0,o.status.value="success",Promise.resolve(h)}o._abortController&&o._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),o._abortController=new AbortController,o.status.value="pending";const _=new AbortController,C=new Promise((h,y)=>{try{const g=c.timeout??s.timeout,u=ua([o._abortController?.signal,c?.signal],_.signal,g);if(u.aborted){const l=u.reason;y(l instanceof Error?l:new DOMException(String(l??"Aborted"),"AbortError"));return}return u.addEventListener("abort",()=>{const l=u.reason;y(l instanceof Error?l:new DOMException(String(l??"Aborted"),"AbortError"))},{once:!0,signal:_.signal}),Promise.resolve(n(a,{signal:u})).then(h,y)}catch(g){y(g)}}).then(async h=>{let y=h;s.transform&&(y=await s.transform(h)),s.pick&&(y=ca(y,s.pick)),a.payload.data[t]=y,o.data.value=y,o.error.value=void 0,o.status.value="success"}).catch(h=>{if(a._asyncDataPromises[t]&&a._asyncDataPromises[t]!==C||o._abortController?.signal.aborted)return a._asyncDataPromises[t];if(typeof DOMException<"u"&&h instanceof DOMException&&h.name==="AbortError")return o.status.value="idle",a._asyncDataPromises[t];o.error.value=J(h),o.data.value=w(s.default()),o.status.value="error"}).finally(()=>{_.abort(),delete a._asyncDataPromises[t]});return a._asyncDataPromises[t]=C,a._asyncDataPromises[t]},_execute:ra((...d)=>o.execute(...d),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{m(),a._asyncData[t]?._init&&(a._asyncData[t]._init=!1),D||x(()=>{a._asyncData[t]?._init||(F(a,t),o.execute=()=>Promise.resolve())})}};return o}const la=()=>{},N=(a,t,i)=>{if(t.isHydrating)return t.payload.data[a];if(i.cause!=="refresh:manual"&&i.cause!=="refresh:hook")return t.static.data[a]};function ua(a,t,i){const s=a.filter(n=>!!n);if(typeof i=="number"&&i>=0){const n=AbortSignal.timeout?.(i);n&&s.push(n)}if(AbortSignal.any)return AbortSignal.any(s);const r=new AbortController;for(const n of s)if(n.aborted){const e=n.reason??new DOMException("Aborted","AbortError");try{r.abort(e)}catch{r.abort()}return r.signal}const D=()=>{const e=s.find(f=>f.aborted)?.reason??new DOMException("Aborted","AbortError");try{r.abort(e)}catch{r.abort()}};for(const n of s)n.addEventListener?.("abort",D,{once:!0,signal:t});return r.signal}function da(){const{$api:a}=R();function t(n,e){return a(n,{...e,method:"GET"})}function i(n,e,f){return a(n,{...f,method:"POST",body:e??void 0})}function s(n,e,f){return a(n,{...f,method:"PUT",body:e??void 0})}function r(n,e,f){return a(n,{...f,method:"PATCH",body:e??void 0})}function D(n,e){return a(n,{...e,method:"DELETE"})}return{get:t,post:i,put:s,patch:r,delete:D,$api:a}}const _a=X({__name:"[id]",async setup(a){let t,i;const s=Y(),r=da(),D=P(()=>`todo-single-${s.params.id}`),{data:n,error:e}=([t,i]=Z(()=>oa(D,()=>r.get(`/todos/${s.params.id}`),"$UKrvb4TRsy")),t=await t,i(),t);return e.value&&K({statusCode:404}),k({title:n.value?.title}),(f,m)=>(ta(),aa("pre",null,"    "+ea(w(n))+`
  `,1))}});export{_a as default};
